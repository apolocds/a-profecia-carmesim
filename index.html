<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Organizador de Fichas RPG</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: Arial, sans-serif;
        }

        .create-slot {
            width: 250px;
            height: 250px;
            background-color: transparent;
            border: 3px solid #fff;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .create-slot:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .home-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            padding: 40px;
            max-width: 1200px;
            width: 100%;
        }

        .character-slot {
            width: 250px;
            height: 250px;
            background-color: rgba(255, 255, 255, 0.05);
            border: 3px solid #fff;
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            padding: 20px;
        }

        .character-slot:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: scale(1.05);
        }

        .character-slot-name {
            font-size: 20px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 10px;
            text-align: center;
        }

        .character-slot-info {
            font-size: 14px;
            color: #aaa;
            text-align: center;
        }

        .delete-character {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #dc2626;
            border: none;
            color: #fff;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .delete-character:hover {
            background-color: #b91c1c;
        }

        .plus-icon {
            width: 80px;
            height: 80px;
            position: relative;
            margin-bottom: 20px;
        }

        .plus-icon::before,
        .plus-icon::after {
            content: '';
            position: absolute;
            background-color: #fff;
        }

        .plus-icon::before {
            width: 6px;
            height: 80px;
            left: 50%;
            transform: translateX(-50%);
        }

        .plus-icon::after {
            width: 80px;
            height: 6px;
            top: 50%;
            transform: translateY(-50%);
        }

        .create-text {
            color: #fff;
            font-size: 18px;
            text-align: center;
            letter-spacing: 0.5px;
        }

        .character-creation {
            display: none;
            color: #fff;
            padding: 40px;
            max-width: 1000px;
            width: 100%;
        }

        .character-creation.active {
            display: block;
        }

        .back-button {
            background-color: transparent;
            border: 2px solid #fff;
            color: #fff;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .top-navigation {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .save-button {
            background-color: #16a34a;
            border: 2px solid #16a34a;
            color: #fff;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
            margin-left: auto;
        }

        .save-button:hover {
            background-color: #15803d;
            border-color: #15803d;
        }

        .tabs-container {
            display: flex;
            gap: 5px;
            flex: 1;
        }

        .tab-button {
            background-color: transparent;
            border: 2px solid #fff;
            color: #fff;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .tab-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .tab-button.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-color: #fff;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .character-header {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #fff;
            border-radius: 8px;
        }

        .character-image {
            width: 150px;
            height: 150px;
            border: 2px solid #fff;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            background-color: rgba(255, 255, 255, 0.05);
            overflow: hidden;
            flex-shrink: 0;
        }

        .character-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .character-image-placeholder {
            color: #888;
            text-align: center;
            font-size: 14px;
        }

        .character-info {
            flex: 1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .info-field {
            display: flex;
            flex-direction: column;
        }

        .info-field label {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .info-field input {
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
        }

        .stats-row {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
            align-items: center;
            justify-content: center;
        }

        .stat-box {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-box label {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .stat-box input {
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            width: 80px;
            text-align: center;
        }

        .armor-class {
            position: relative;
            width: 80px;
            height: 90px;
        }

        .shield-icon {
            width: 80px;
            height: 80px;
            fill: none;
            stroke: #fff;
            stroke-width: 2;
        }

        .armor-value {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            font-weight: bold;
            color: #fff;
        }

        .armor-label {
            font-size: 10px;
            color: #aaa;
            text-align: center;
            margin-top: 5px;
        }

        .bars-container {
            margin-bottom: 30px;
        }

        .bar-wrapper {
            margin-bottom: 20px;
        }

        .bar-label {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .bar-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .bar-button {
            background-color: transparent;
            border: 2px solid #fff;
            color: #fff;
            width: 35px;
            height: 35px;
            font-size: 20px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .bar-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .bar {
            flex: 1;
            height: 35px;
            border: 2px solid #fff;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            transition: width 0.3s ease;
        }

        .bar-fill.health {
            background-color: #dc2626;
        }

        .bar-fill.mana {
            background-color: #2563eb;
        }

        .bar-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #fff;
            font-size: 14px;
        }

        .attributes-container {
            display: flex;
            gap: 15px;
            justify-content: space-around;
        }

        .attribute {
            display: flex;
            flex-direction: column;
            align-items: center;
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 15px 10px;
            min-width: 90px;
        }

        .attribute-label {
            font-size: 11px;
            color: #aaa;
            margin-bottom: 8px;
            text-align: center;
        }

        .attribute-value {
            font-size: 32px;
            font-weight: bold;
            color: #fff;
            margin-bottom: 5px;
        }

        .attribute-modifier {
            font-size: 18px;
            color: #aaa;
        }

        .attribute input {
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 24px;
            width: 70px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .skills-container {
            margin-top: 30px;
            padding: 20px;
            border: 2px solid #fff;
            border-radius: 8px;
        }

        .skills-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            text-align: center;
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .skill-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .skill-label {
            font-size: 14px;
            color: #fff;
            flex: 1;
        }

        .skill-attr {
            color: #aaa;
            font-size: 12px;
        }

        .skill-item input {
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 6px;
            border-radius: 4px;
            font-size: 14px;
            width: 60px;
            text-align: center;
        }

        .abilities-container {
            margin-top: 20px;
        }

        .ability-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 2px solid #fff;
            border-radius: 8px;
        }

        .ability-section-title {
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
        }

        .add-ability-button {
            background-color: transparent;
            border: 2px dashed #fff;
            color: #fff;
            padding: 10px 20px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 6px;
            width: 100%;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .add-ability-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .ability-card {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid #fff;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
            position: relative;
        }

        .ability-card-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            color: #fff;
        }

        .ability-card-meta {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 8px;
        }

        .ability-card-description {
            font-size: 14px;
            color: #fff;
            line-height: 1.5;
        }

        .edit-ability-button {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 5px 10px;
            font-size: 12px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .edit-ability-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: #1a1a1a;
            border: 2px solid #fff;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #fff;
        }

        .modal-field {
            margin-bottom: 15px;
        }

        .modal-field label {
            display: block;
            font-size: 12px;
            color: #aaa;
            margin-bottom: 5px;
        }

        .modal-field input,
        .modal-field textarea {
            width: 100%;
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            font-family: Arial, sans-serif;
        }

        .modal-field textarea {
            resize: vertical;
            min-height: 80px;
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .modal-button {
            flex: 1;
            background-color: transparent;
            border: 2px solid #fff;
            color: #fff;
            padding: 10px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .modal-button:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .modal-button.primary {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .attack-card-meta {
            font-size: 14px;
            color: #ddd;
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .attack-card-meta-line {
            margin-bottom: 5px;
        }

        .capacity-bar-container {
            margin-top: 20px;
            padding: 20px;
            border: 2px solid #fff;
            border-radius: 8px;
        }

        .capacity-bar-title {
            font-size: 14px;
            color: #aaa;
            margin-bottom: 10px;
        }

        .capacity-input-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .capacity-input-row label {
            font-size: 12px;
            color: #aaa;
        }

        .capacity-input-row input {
            background-color: transparent;
            border: 1px solid #fff;
            color: #fff;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            width: 100px;
            text-align: center;
        }

        .capacity-bar {
            height: 30px;
            border: 2px solid #fff;
            border-radius: 4px;
            position: relative;
            overflow: hidden;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .capacity-fill {
            height: 100%;
            background-color: #16a34a;
            transition: width 0.3s ease, background-color 0.3s ease;
        }

        .capacity-fill.warning {
            background-color: #eab308;
        }

        .capacity-fill.danger {
            background-color: #dc2626;
        }

        .capacity-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #fff;
            font-size: 14px;
        }

        .item-card-load {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 8px;
        }
    </style>
</head>
<body>
    <div class="home-container" id="homeScreen">
        <div class="create-slot" id="createSlot">
            <div class="plus-icon"></div>
            <div class="create-text">Criar Novo Personagem</div>
        </div>
    </div>

    <div class="character-creation" id="characterCreation">
        <div class="top-navigation">
            <button class="back-button" id="backButton">‚Üê Voltar</button>
            <div class="tabs-container">
                <button class="tab-button active" onclick="switchTab('attributes')">Atributos</button>
                <button class="tab-button" onclick="switchTab('abilities')">Habilidades</button>
                <button class="tab-button" onclick="switchTab('combat')">Combate</button>
                <button class="tab-button" onclick="switchTab('inventory')">Invent√°rio</button>
            </div>
            <button class="save-button" onclick="saveCharacter()">üíæ Salvar Personagem</button>
        </div>
        
        <div class="character-header">
            <div class="character-image" id="characterImage">
                <div class="character-image-placeholder">Clique para adicionar imagem</div>
            </div>
            <div class="character-info">
                <div class="info-field">
                    <label>Nome</label>
                    <input type="text" id="charName">
                </div>
                <div class="info-field">
                    <label>Ra√ßa</label>
                    <input type="text" id="charRace">
                </div>
                <div class="info-field">
                    <label>Classe</label>
                    <input type="text" id="charClass">
                </div>
                <div class="info-field">
                    <label>Antecedente</label>
                    <input type="text" id="charBackground">
                </div>
                <div class="info-field">
                    <label>Tend√™ncia</label>
                    <input type="text" id="charAlignment">
                </div>
                <div class="info-field">
                    <label>Jogador</label>
                    <input type="text" id="charPlayer">
                </div>
            </div>
        </div>

        <div id="attributesTab" class="tab-content active">
            <div class="stats-row">
            <div class="stat-box">
                <label>N√≠vel</label>
                <input type="number" id="charLevel" value="1" min="1">
            </div>
            <div class="stat-box">
                <label>B√¥nus de Per√≠cia</label>
                <input type="number" id="profBonus" value="2">
            </div>
            <div class="stat-box">
                <label>Inspira√ß√£o</label>
                <input type="number" id="inspiration" value="0">
            </div>
            <div class="stat-box">
                <label>Iniciativa</label>
                <input type="number" id="initiative" value="0">
            </div>
            <div class="stat-box">
                <label>CD do TR</label>
                <input type="number" id="saveDC" value="10">
            </div>
            <div class="stat-box">
                <label>Percep√ß√£o</label>
                <input type="number" id="perception" value="10">
            </div>
            <div class="stat-box">
                <label>Deslocamento</label>
                <input type="number" id="charSpeed" value="30">
            </div>
            <div class="armor-class">
                <svg class="shield-icon" viewBox="0 0 100 120">
                    <path d="M50 5 L10 25 L10 60 Q10 90 50 115 Q90 90 90 60 L90 25 Z" />
                </svg>
                <div class="armor-value" id="armorValue">10</div>
                <div class="armor-label">Classe de Armadura</div>
            </div>
        </div>

        <div class="bars-container">
            <div class="bar-wrapper">
                <div class="bar-label">Pontos de Vida</div>
                <div class="bar-control">
                    <button class="bar-button" onclick="changeHealth(-1)">-</button>
                    <div class="bar">
                        <div class="bar-fill health" id="healthFill"></div>
                        <div class="bar-text" id="healthText">0 / 0</div>
                    </div>
                    <button class="bar-button" onclick="changeHealth(1)">+</button>
                </div>
            </div>

            <div class="bar-wrapper">
                <div class="bar-label">Pontos de Mana</div>
                <div class="bar-control">
                    <button class="bar-button" onclick="changeMana(-1)">-</button>
                    <div class="bar">
                        <div class="bar-fill mana" id="manaFill"></div>
                        <div class="bar-text" id="manaText">0 / 0</div>
                    </div>
                    <button class="bar-button" onclick="changeMana(1)">+</button>
                </div>
            </div>
        </div>

        <div class="attributes-container">
            <div class="attribute">
                <div class="attribute-label">For√ßa</div>
                <input type="number" id="str" value="10" min="1" max="30" oninput="updateModifier('str')">
                <div class="attribute-modifier" id="str-mod">+0</div>
            </div>
            <div class="attribute">
                <div class="attribute-label">Destreza</div>
                <input type="number" id="dex" value="10" min="1" max="30" oninput="updateModifier('dex')">
                <div class="attribute-modifier" id="dex-mod">+0</div>
            </div>
            <div class="attribute">
                <div class="attribute-label">Constitui√ß√£o</div>
                <input type="number" id="con" value="10" min="1" max="30" oninput="updateModifier('con')">
                <div class="attribute-modifier" id="con-mod">+0</div>
            </div>
            <div class="attribute">
                <div class="attribute-label">Intelig√™ncia</div>
                <input type="number" id="int" value="10" min="1" max="30" oninput="updateModifier('int')">
                <div class="attribute-modifier" id="int-mod">+0</div>
            </div>
            <div class="attribute">
                <div class="attribute-label">Sabedoria</div>
                <input type="number" id="wis" value="10" min="1" max="30" oninput="updateModifier('wis')">
                <div class="attribute-modifier" id="wis-mod">+0</div>
            </div>
            <div class="attribute">
                <div class="attribute-label">Carisma</div>
                <input type="number" id="cha" value="10" min="1" max="30" oninput="updateModifier('cha')">
                <div class="attribute-modifier" id="cha-mod">+0</div>
            </div>
        </div>

        <div class="skills-container">
            <div class="skills-title">Per√≠cias</div>
            <div class="skills-grid">
                <div class="skill-item">
                    <span class="skill-label">Acrobacia <span class="skill-attr">(Des)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Arcanismo <span class="skill-attr">(Int)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Atletismo <span class="skill-attr">(For)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Atua√ß√£o <span class="skill-attr">(Car)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Blefar <span class="skill-attr">(Car)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Furtividade <span class="skill-attr">(Des)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Hist√≥ria <span class="skill-attr">(Int)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Intimida√ß√£o <span class="skill-attr">(Car)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Intui√ß√£o <span class="skill-attr">(Sab)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Investiga√ß√£o <span class="skill-attr">(Int)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Lidar com Animais <span class="skill-attr">(Sab)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Medicina <span class="skill-attr">(Sab)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Natureza <span class="skill-attr">(Int)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Percep√ß√£o <span class="skill-attr">(Sab)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Persuas√£o <span class="skill-attr">(Car)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Prestidigita√ß√£o <span class="skill-attr">(Des)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Religi√£o <span class="skill-attr">(Int)</span></span>
                    <input type="number" value="0">
                </div>
                <div class="skill-item">
                    <span class="skill-label">Sobreviv√™ncia <span class="skill-attr">(Sab)</span></span>
                    <input type="number" value="0">
                </div>
            </div>
        </div>
    </div>

    <div id="abilitiesTab" class="tab-content">
        <div class="abilities-container">
            <div class="ability-section">
                <div class="ability-section-title">Truques e Talentos</div>
                <button class="add-ability-button" onclick="openTalentModal()">+ Adicionar Truque/Talento</button>
                <div id="talentsContainer"></div>
            </div>

            <div class="ability-section">
                <div class="ability-section-title">Poderes</div>
                <button class="add-ability-button" onclick="openPowerModal()">+ Adicionar Poder</button>
                <div id="powersContainer"></div>
            </div>
        </div>
    </div>

    <div id="combatTab" class="tab-content">
        <div class="abilities-container">
            <div class="ability-section">
                <div class="ability-section-title">Ataques e Armas</div>
                <button class="add-ability-button" onclick="openAttackModal()">+ Adicionar Ataque/Arma</button>
                <div id="attacksContainer"></div>
            </div>
        </div>
    </div>

    <div id="inventoryTab" class="tab-content">
        <div class="abilities-container">
            <div class="ability-section">
                <div class="ability-section-title">Invent√°rio</div>
                <button class="add-ability-button" onclick="openItemModal()">+ Adicionar Item</button>
                <div id="itemsContainer"></div>
            </div>
            
            <div class="capacity-bar-container">
                <div class="capacity-bar-title">Capacidade de Carga</div>
                <div class="capacity-input-row">
                    <label>Capacidade M√°xima:</label>
                    <input type="number" id="maxCapacity" value="150" oninput="updateCapacity()">
                </div>
                <div class="capacity-bar">
                    <div class="capacity-fill" id="capacityFill"></div>
                    <div class="capacity-text" id="capacityText">0 / 150</div>
                </div>
            </div>
        </div>
    </div>
    </div>

    <div id="talentModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Adicionar Truque/Talento</div>
            <div class="modal-field">
                <label>Nome da Habilidade</label>
                <input type="text" id="talentName">
            </div>
            <div class="modal-field">
                <label>Descri√ß√£o</label>
                <textarea id="talentDescription"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="modal-button" onclick="closeTalentModal()">Cancelar</button>
                <button class="modal-button primary" onclick="saveTalent()">Salvar</button>
            </div>
        </div>
    </div>

    <div id="powerModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Adicionar Poder</div>
            <div class="modal-field">
                <label>Nome do Poder</label>
                <input type="text" id="powerName">
            </div>
            <div class="modal-field">
                <label>Custo</label>
                <input type="text" id="powerCost">
            </div>
            <div class="modal-field">
                <label>Tempo de Conjura√ß√£o</label>
                <input type="text" id="powerCastTime">
            </div>
            <div class="modal-field">
                <label>Alcance</label>
                <input type="text" id="powerRange">
            </div>
            <div class="modal-field">
                <label>Dura√ß√£o</label>
                <input type="text" id="powerDuration">
            </div>
            <div class="modal-field">
                <label>Descri√ß√£o</label>
                <textarea id="powerDescription"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="modal-button" onclick="closePowerModal()">Cancelar</button>
                <button class="modal-button primary" onclick="savePower()">Salvar</button>
            </div>
        </div>
    </div>

    <div id="attackModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Adicionar Ataque/Arma</div>
            <div class="modal-field">
                <label>Nome da Arma</label>
                <input type="text" id="attackName">
            </div>
            <div class="modal-field">
                <label>Dano</label>
                <input type="text" id="attackDamage">
            </div>
            <div class="modal-field">
                <label>Cr√≠tico</label>
                <input type="text" id="attackCritical">
            </div>
            <div class="modal-field">
                <label>Tipo de Arma</label>
                <input type="text" id="attackWeaponType">
            </div>
            <div class="modal-field">
                <label>Tipo de Dano</label>
                <input type="text" id="attackDamageType">
            </div>
            <div class="modal-field">
                <label>Alcance</label>
                <input type="text" id="attackRange">
            </div>
            <div class="modal-field">
                <label>Carga</label>
                <input type="text" id="attackLoad">
            </div>
            <div class="modal-field">
                <label>Descri√ß√£o</label>
                <textarea id="attackDescription"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="modal-button" onclick="closeAttackModal()">Cancelar</button>
                <button class="modal-button primary" onclick="saveAttack()">Salvar</button>
            </div>
        </div>
    </div>

    <div id="itemModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Adicionar Item</div>
            <div class="modal-field">
                <label>Nome do Item</label>
                <input type="text" id="itemName">
            </div>
            <div class="modal-field">
                <label>Carga</label>
                <input type="number" id="itemLoad" step="0.1">
            </div>
            <div class="modal-field">
                <label>Descri√ß√£o</label>
                <textarea id="itemDescription"></textarea>
            </div>
            <div class="modal-buttons">
                <button class="modal-button" onclick="closeItemModal()">Cancelar</button>
                <button class="modal-button primary" onclick="saveItem()">Salvar</button>
            </div>
        </div>
    </div>

    <script>
        const createSlot = document.getElementById('createSlot');
        const characterCreation = document.getElementById('characterCreation');
        const backButton = document.getElementById('backButton');
        const homeScreen = document.getElementById('homeScreen');

        let currentHealth = 0;
        let maxHealth = 0;
        let currentMana = 0;
        let maxMana = 0;
        let talents = [];
        let powers = [];
        let attacks = [];
        let items = [];
        let editingTalentIndex = -1;
        let editingPowerIndex = -1;
        let editingAttackIndex = -1;
        let editingItemIndex = -1;
        let currentCharacterId = null;
        let characters = [];

        // Carregar personagens salvos
        function loadCharacters() {
            const saved = localStorage.getItem('rpgCharacters');
            if (saved) {
                characters = JSON.parse(saved);
            }
            renderCharacterSlots();
        }

        // Renderizar slots de personagens
        function renderCharacterSlots() {
            homeScreen.innerHTML = '';
            
            // Adicionar slot de criar novo
            const createSlotElement = document.createElement('div');
            createSlotElement.className = 'create-slot';
            createSlotElement.innerHTML = `
                <div class="plus-icon"></div>
                <div class="create-text">Criar Novo Personagem</div>
            `;
            createSlotElement.addEventListener('click', createNewCharacter);
            homeScreen.appendChild(createSlotElement);
            
            // Adicionar personagens salvos
            characters.forEach((char, index) => {
                const slot = document.createElement('div');
                slot.className = 'character-slot';
                slot.innerHTML = `
                    <button class="delete-character" onclick="deleteCharacter(${index}, event)">√ó</button>
                    <div class="character-slot-name">${char.name || 'Sem Nome'}</div>
                    <div class="character-slot-info">${char.race || ''} ${char.class || ''}</div>
                    <div class="character-slot-info">N√≠vel ${char.level || 1}</div>
                `;
                slot.addEventListener('click', () => loadCharacter(index));
                homeScreen.appendChild(slot);
            });
        }

        // Criar novo personagem
        function createNewCharacter() {
            currentCharacterId = null;
            clearCharacterData();
            homeScreen.style.display = 'none';
            characterCreation.classList.add('active');
        }

        // Limpar dados do personagem
        function clearCharacterData() {
            // Limpar campos b√°sicos
            document.getElementById('charName').value = '';
            document.getElementById('charRace').value = '';
            document.getElementById('charClass').value = '';
            document.getElementById('charBackground').value = '';
            document.getElementById('charAlignment').value = '';
            document.getElementById('charPlayer').value = '';
            document.getElementById('charLevel').value = '1';
            document.getElementById('profBonus').value = '2';
            document.getElementById('inspiration').value = '0';
            document.getElementById('initiative').value = '0';
            document.getElementById('saveDC').value = '10';
            document.getElementById('perception').value = '10';
            document.getElementById('charSpeed').value = '30';
            document.getElementById('armorValue').textContent = '10';
            
            // Limpar imagem
            document.getElementById('characterImage').innerHTML = '<div class="character-image-placeholder">Clique para adicionar imagem</div>';
            
            // Limpar atributos
            ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(attr => {
                document.getElementById(attr).value = '10';
                updateModifier(attr);
            });
            
            // Limpar barras
            currentHealth = 0;
            maxHealth = 0;
            currentMana = 0;
            maxMana = 0;
            updateHealthBar();
            updateManaBar();
            
            // Limpar arrays
            talents = [];
            powers = [];
            attacks = [];
            items = [];
            renderTalents();
            renderPowers();
            renderAttacks();
            renderItems();
            updateCapacity();
        }

        // Carregar personagem
        function loadCharacter(index) {
            currentCharacterId = index;
            const char = characters[index];
            
            // Carregar dados b√°sicos
            document.getElementById('charName').value = char.name || '';
            document.getElementById('charRace').value = char.race || '';
            document.getElementById('charClass').value = char.class || '';
            document.getElementById('charBackground').value = char.background || '';
            document.getElementById('charAlignment').value = char.alignment || '';
            document.getElementById('charPlayer').value = char.player || '';
            document.getElementById('charLevel').value = char.level || 1;
            document.getElementById('profBonus').value = char.profBonus || 2;
            document.getElementById('inspiration').value = char.inspiration || 0;
            document.getElementById('initiative').value = char.initiative || 0;
            document.getElementById('saveDC').value = char.saveDC || 10;
            document.getElementById('perception').value = char.perception || 10;
            document.getElementById('charSpeed').value = char.speed || 30;
            document.getElementById('armorValue').textContent = char.armorClass || 10;
            
            // Carregar imagem
            if (char.image) {
                document.getElementById('characterImage').innerHTML = `<img src="${char.image}">`;
            }
            
            // Carregar atributos
            ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(attr => {
                document.getElementById(attr).value = char.attributes?.[attr] || 10;
                updateModifier(attr);
            });
            
            // Carregar barras
            currentHealth = char.currentHealth || 0;
            maxHealth = char.maxHealth || 0;
            currentMana = char.currentMana || 0;
            maxMana = char.maxMana || 0;
            updateHealthBar();
            updateManaBar();
            
            // Carregar arrays
            talents = char.talents || [];
            powers = char.powers || [];
            attacks = char.attacks || [];
            items = char.items || [];
            renderTalents();
            renderPowers();
            renderAttacks();
            renderItems();
            
            document.getElementById('maxCapacity').value = char.maxCapacity || 150;
            updateCapacity();
            
            homeScreen.style.display = 'none';
            characterCreation.classList.add('active');
        }

        // Salvar personagem
        function saveCharacter() {
            const charData = {
                name: document.getElementById('charName').value,
                race: document.getElementById('charRace').value,
                class: document.getElementById('charClass').value,
                background: document.getElementById('charBackground').value,
                alignment: document.getElementById('charAlignment').value,
                player: document.getElementById('charPlayer').value,
                level: document.getElementById('charLevel').value,
                profBonus: document.getElementById('profBonus').value,
                inspiration: document.getElementById('inspiration').value,
                initiative: document.getElementById('initiative').value,
                saveDC: document.getElementById('saveDC').value,
                perception: document.getElementById('perception').value,
                speed: document.getElementById('charSpeed').value,
                armorClass: document.getElementById('armorValue').textContent,
                image: document.getElementById('characterImage').querySelector('img')?.src || null,
                attributes: {
                    str: document.getElementById('str').value,
                    dex: document.getElementById('dex').value,
                    con: document.getElementById('con').value,
                    int: document.getElementById('int').value,
                    wis: document.getElementById('wis').value,
                    cha: document.getElementById('cha').value
                },
                currentHealth,
                maxHealth,
                currentMana,
                maxMana,
                talents,
                powers,
                attacks,
                items,
                maxCapacity: document.getElementById('maxCapacity').value
            };
            
            if (currentCharacterId !== null) {
                characters[currentCharacterId] = charData;
            } else {
                characters.push(charData);
            }
            
            localStorage.setItem('rpgCharacters', JSON.stringify(characters));
            alert('Personagem salvo com sucesso!');
        }

        // Deletar personagem
        function deleteCharacter(index, event) {
            event.stopPropagation();
            if (confirm('Tem certeza que deseja deletar este personagem?')) {
                characters.splice(index, 1);
                localStorage.setItem('rpgCharacters', JSON.stringify(characters));
                renderCharacterSlots();
            }
        }

        createSlot.addEventListener('click', function() {
            createSlot.style.display = 'none';
            characterCreation.classList.add('active');
        });

        backButton.addEventListener('click', function() {
            characterCreation.classList.remove('active');
            createSlot.style.display = 'flex';
            homeScreen.style.display = 'grid';
            renderCharacterSlots();
        });

        // Fun√ß√£o para calcular modificador
        function calcularModificador(valorAtributo) {
            return Math.floor((valorAtributo - 10) / 2);
        }

        // Atualizar modificador de atributo
        function updateModifier(attr) {
            const value = parseInt(document.getElementById(attr).value) || 10;
            const modifier = calcularModificador(value);
            const modifierText = modifier >= 0 ? `+${modifier}` : `${modifier}`;
            document.getElementById(`${attr}-mod`).textContent = modifierText;
        }

        // Inicializar todos os modificadores
        ['str', 'dex', 'con', 'int', 'wis', 'cha'].forEach(attr => updateModifier(attr));

        // Fun√ß√µes para barras de vida
        function changeHealth(amount) {
            currentHealth = Math.max(0, Math.min(maxHealth, currentHealth + amount));
            updateHealthBar();
        }

        function updateHealthBar() {
            const percentage = maxHealth > 0 ? (currentHealth / maxHealth) * 100 : 0;
            document.getElementById('healthFill').style.width = percentage + '%';
            document.getElementById('healthText').textContent = `${currentHealth} / ${maxHealth}`;
        }

        // Fun√ß√µes para barras de mana
        function changeMana(amount) {
            currentMana = Math.max(0, Math.min(maxMana, currentMana + amount));
            updateManaBar();
        }

        function updateManaBar() {
            const percentage = maxMana > 0 ? (currentMana / maxMana) * 100 : 0;
            document.getElementById('manaFill').style.width = percentage + '%';
            document.getElementById('manaText').textContent = `${currentMana} / ${maxMana}`;
        }

        // Upload de imagem
        document.getElementById('characterImage').addEventListener('click', function() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'image/*';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        const img = document.createElement('img');
                        img.src = event.target.result;
                        document.getElementById('characterImage').innerHTML = '';
                        document.getElementById('characterImage').appendChild(img);
                    };
                    reader.readAsDataURL(file);
                }
            };
            input.click();
        });

        // Input para valores m√°ximos de vida e mana
        document.getElementById('healthText').addEventListener('click', function() {
            const newMax = prompt('Digite o valor m√°ximo de Pontos de Vida:', maxHealth);
            if (newMax !== null && !isNaN(newMax)) {
                maxHealth = parseInt(newMax);
                currentHealth = maxHealth;
                updateHealthBar();
            }
        });

        document.getElementById('manaText').addEventListener('click', function() {
            const newMax = prompt('Digite o valor m√°ximo de Pontos de Mana:', maxMana);
            if (newMax !== null && !isNaN(newMax)) {
                maxMana = parseInt(newMax);
                currentMana = maxMana;
                updateManaBar();
            }
        });

        // Input para Classe de Armadura
        document.getElementById('armorValue').addEventListener('click', function() {
            const newAC = prompt('Digite a Classe de Armadura:', this.textContent);
            if (newAC !== null && !isNaN(newAC)) {
                this.textContent = parseInt(newAC);
            }
        });

        // Sistema de Abas
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-button');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            if (tabName === 'attributes') {
                document.getElementById('attributesTab').classList.add('active');
                buttons[0].classList.add('active');
            } else if (tabName === 'abilities') {
                document.getElementById('abilitiesTab').classList.add('active');
                buttons[1].classList.add('active');
            } else if (tabName === 'combat') {
                document.getElementById('combatTab').classList.add('active');
                buttons[2].classList.add('active');
            } else if (tabName === 'inventory') {
                document.getElementById('inventoryTab').classList.add('active');
                buttons[3].classList.add('active');
            }
        }

        // Fun√ß√µes para Truques e Talentos
        function openTalentModal(index = -1) {
            editingTalentIndex = index;
            const modal = document.getElementById('talentModal');
            
            if (index >= 0) {
                document.getElementById('talentName').value = talents[index].name;
                document.getElementById('talentDescription').value = talents[index].description;
            } else {
                document.getElementById('talentName').value = '';
                document.getElementById('talentDescription').value = '';
            }
            
            modal.classList.add('active');
        }

        function closeTalentModal() {
            document.getElementById('talentModal').classList.remove('active');
            editingTalentIndex = -1;
        }

        function saveTalent() {
            const name = document.getElementById('talentName').value;
            const description = document.getElementById('talentDescription').value;
            
            if (!name || !description) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (editingTalentIndex >= 0) {
                talents[editingTalentIndex] = { name, description };
            } else {
                talents.push({ name, description });
            }
            
            renderTalents();
            closeTalentModal();
        }

        function renderTalents() {
            const container = document.getElementById('talentsContainer');
            container.innerHTML = '';
            
            talents.forEach((talent, index) => {
                const card = document.createElement('div');
                card.className = 'ability-card';
                card.innerHTML = `
                    <button class="edit-ability-button" onclick="openTalentModal(${index})">Editar</button>
                    <div class="ability-card-title">${talent.name}</div>
                    <div class="ability-card-description">${talent.description}</div>
                `;
                container.appendChild(card);
            });
        }

        // Fun√ß√µes para Poderes
        function openPowerModal(index = -1) {
            editingPowerIndex = index;
            const modal = document.getElementById('powerModal');
            
            if (index >= 0) {
                document.getElementById('powerName').value = powers[index].name;
                document.getElementById('powerCost').value = powers[index].cost;
                document.getElementById('powerCastTime').value = powers[index].castTime;
                document.getElementById('powerRange').value = powers[index].range;
                document.getElementById('powerDuration').value = powers[index].duration;
                document.getElementById('powerDescription').value = powers[index].description;
            } else {
                document.getElementById('powerName').value = '';
                document.getElementById('powerCost').value = '';
                document.getElementById('powerCastTime').value = '';
                document.getElementById('powerRange').value = '';
                document.getElementById('powerDuration').value = '';
                document.getElementById('powerDescription').value = '';
            }
            
            modal.classList.add('active');
        }

        function closePowerModal() {
            document.getElementById('powerModal').classList.remove('active');
            editingPowerIndex = -1;
        }

        function savePower() {
            const name = document.getElementById('powerName').value;
            const cost = document.getElementById('powerCost').value;
            const castTime = document.getElementById('powerCastTime').value;
            const range = document.getElementById('powerRange').value;
            const duration = document.getElementById('powerDuration').value;
            const description = document.getElementById('powerDescription').value;
            
            if (!name || !cost || !castTime || !range || !duration || !description) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (editingPowerIndex >= 0) {
                powers[editingPowerIndex] = { name, cost, castTime, range, duration, description };
            } else {
                powers.push({ name, cost, castTime, range, duration, description });
            }
            
            renderPowers();
            closePowerModal();
        }

        function renderPowers() {
            const container = document.getElementById('powersContainer');
            container.innerHTML = '';
            
            powers.forEach((power, index) => {
                const card = document.createElement('div');
                card.className = 'ability-card';
                card.innerHTML = `
                    <button class="edit-ability-button" onclick="openPowerModal(${index})">Editar</button>
                    <div class="ability-card-title">${power.name}</div>
                    <div class="ability-card-meta">
                        Custo: ${power.cost} | Tempo de Conjura√ß√£o: ${power.castTime} | Alcance: ${power.range} | Dura√ß√£o: ${power.duration}
                    </div>
                    <div class="ability-card-description">${power.description}</div>
                `;
                container.appendChild(card);
            });
        }

        // Fun√ß√µes para Ataques
        function openAttackModal(index = -1) {
            editingAttackIndex = index;
            const modal = document.getElementById('attackModal');
            
            if (index >= 0) {
                document.getElementById('attackName').value = attacks[index].name;
                document.getElementById('attackDamage').value = attacks[index].damage;
                document.getElementById('attackCritical').value = attacks[index].critical;
                document.getElementById('attackWeaponType').value = attacks[index].weaponType;
                document.getElementById('attackDamageType').value = attacks[index].damageType;
                document.getElementById('attackRange').value = attacks[index].range;
                document.getElementById('attackLoad').value = attacks[index].load;
                document.getElementById('attackDescription').value = attacks[index].description;
            } else {
                document.getElementById('attackName').value = '';
                document.getElementById('attackDamage').value = '';
                document.getElementById('attackCritical').value = '';
                document.getElementById('attackWeaponType').value = '';
                document.getElementById('attackDamageType').value = '';
                document.getElementById('attackRange').value = '';
                document.getElementById('attackLoad').value = '';
                document.getElementById('attackDescription').value = '';
            }
            
            modal.classList.add('active');
        }

        function closeAttackModal() {
            document.getElementById('attackModal').classList.remove('active');
            editingAttackIndex = -1;
        }

        function saveAttack() {
            const name = document.getElementById('attackName').value;
            const damage = document.getElementById('attackDamage').value;
            const critical = document.getElementById('attackCritical').value;
            const weaponType = document.getElementById('attackWeaponType').value;
            const damageType = document.getElementById('attackDamageType').value;
            const range = document.getElementById('attackRange').value;
            const load = document.getElementById('attackLoad').value;
            const description = document.getElementById('attackDescription').value;
            
            if (!name || !damage || !critical || !weaponType || !damageType || !range || !load || !description) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (editingAttackIndex >= 0) {
                attacks[editingAttackIndex] = { name, damage, critical, weaponType, damageType, range, load, description };
            } else {
                attacks.push({ name, damage, critical, weaponType, damageType, range, load, description });
            }
            
            renderAttacks();
            closeAttackModal();
        }

        function renderAttacks() {
            const container = document.getElementById('attacksContainer');
            container.innerHTML = '';
            
            attacks.forEach((attack, index) => {
                const card = document.createElement('div');
                card.className = 'ability-card';
                card.innerHTML = `
                    <button class="edit-ability-button" onclick="openAttackModal(${index})">Editar</button>
                    <div class="ability-card-title">${attack.name}</div>
                    <div class="attack-card-meta">
                        <div class="attack-card-meta-line">Dano: ${attack.damage} | Cr√≠tico: ${attack.critical}</div>
                        <div class="attack-card-meta-line">Tipo de Arma: ${attack.weaponType} | Tipo de Dano: ${attack.damageType}</div>
                        <div class="attack-card-meta-line">Alcance: ${attack.range} | Carga: ${attack.load}</div>
                    </div>
                    <div class="ability-card-description">${attack.description}</div>
                `;
                container.appendChild(card);
            });
        }

        // Fun√ß√µes para Itens do Invent√°rio
        function openItemModal(index = -1) {
            editingItemIndex = index;
            const modal = document.getElementById('itemModal');
            
            if (index >= 0) {
                document.getElementById('itemName').value = items[index].name;
                document.getElementById('itemLoad').value = items[index].load;
                document.getElementById('itemDescription').value = items[index].description;
            } else {
                document.getElementById('itemName').value = '';
                document.getElementById('itemLoad').value = '';
                document.getElementById('itemDescription').value = '';
            }
            
            modal.classList.add('active');
        }

        function closeItemModal() {
            document.getElementById('itemModal').classList.remove('active');
            editingItemIndex = -1;
        }

        function saveItem() {
            const name = document.getElementById('itemName').value;
            const load = parseFloat(document.getElementById('itemLoad').value) || 0;
            const description = document.getElementById('itemDescription').value;
            
            if (!name || !description) {
                alert('Por favor, preencha todos os campos');
                return;
            }
            
            if (editingItemIndex >= 0) {
                items[editingItemIndex] = { name, load, description };
            } else {
                items.push({ name, load, description });
            }
            
            renderItems();
            updateCapacity();
            closeItemModal();
        }

        function renderItems() {
            const container = document.getElementById('itemsContainer');
            container.innerHTML = '';
            
            items.forEach((item, index) => {
                const card = document.createElement('div');
                card.className = 'ability-card';
                card.innerHTML = `
                    <button class="edit-ability-button" onclick="openItemModal(${index})">Editar</button>
                    <div class="ability-card-title">${item.name}</div>
                    <div class="item-card-load">Carga: ${item.load}</div>
                    <div class="ability-card-description">${item.description}</div>
                `;
                container.appendChild(card);
            });
        }

        function updateCapacity() {
            const maxCapacity = parseFloat(document.getElementById('maxCapacity').value) || 150;
            const currentCapacity = items.reduce((total, item) => total + item.load, 0);
            
            const percentage = maxCapacity > 0 ? (currentCapacity / maxCapacity) * 100 : 0;
            const fill = document.getElementById('capacityFill');
            
            fill.style.width = Math.min(percentage, 100) + '%';
            
            // Mudar cor baseado na porcentagem
            fill.classList.remove('warning', 'danger');
            if (percentage >= 100) {
                fill.classList.add('danger');
            } else if (percentage >= 75) {
                fill.classList.add('warning');
            }
            
            document.getElementById('capacityText').textContent = `${currentCapacity.toFixed(1)} / ${maxCapacity}`;
        }

        // Inicializar capacidade
        updateCapacity();

        // Carregar personagens ao iniciar
        loadCharacters();
    </script>
</body>
</html>